
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Di√©sel EZ Street</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f2f2f2;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 500px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input, button {
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
        .result {
            margin-top: 15px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Calculadora de Di√©sel EZ Street¬Æ</h2>
        <label for="segundos">‚è±Ô∏è Segundos medidos (EZ CUP 4):</label>
        <input type="number" id="segundos" placeholder="Ej. 30">

        <label for="objetivo">üéØ Viscosidad objetivo (CPP):</label>
        <input type="number" id="objetivo" placeholder="Ej. 300">

        <label for="litros">üõ¢Ô∏è Litros de mezcla total:</label>
        <input type="number" id="litros" placeholder="Ej. 1000">

        <button onclick="calcular()">Calcular</button>

        <div class="result" id="resultado"></div>
    </div>

    <script>
        const tablaCPP = {
            15: 200, 16: 206, 17: 212, 18: 219, 19: 226, 20: 232,
            21: 239, 22: 246, 23: 253, 24: 259, 25: 266, 26: 273,
            27: 280, 28: 287, 29: 293, 30: 300, 31: 307, 32: 314,
            33: 321, 34: 328, 35: 335, 36: 342, 37: 349, 38: 356,
            39: 363, 40: 370, 41: 377, 42: 384, 43: 391, 44: 398,
            45: 405, 46: 412, 47: 419, 48: 426, 49: 433, 50: 440
        };

        const tablaDiesel = {
            0: 0, 50: 1, 75: 2, 100: 3, 125: 4, 150: 5
        };

        function interpolar(dif) {
            const claves = Object.keys(tablaDiesel).map(Number).sort((a, b) => a - b);
            for (let i = 0; i < claves.length - 1; i++) {
                if (dif >= claves[i] && dif <= claves[i + 1]) {
                    const x0 = claves[i], x1 = claves[i + 1];
                    const y0 = tablaDiesel[x0], y1 = tablaDiesel[x1];
                    return y0 + (y1 - y0) * (dif - x0) / (x1 - x0);
                }
            }
            return dif < claves[0] ? tablaDiesel[claves[0]] : tablaDiesel[claves[claves.length - 1]];
        }

        function calcular() {
            const segundos = parseFloat(document.getElementById("segundos").value);
            const objetivo = parseFloat(document.getElementById("objetivo").value);
            const litros = parseFloat(document.getElementById("litros").value);

            const actual = tablaCPP[Math.round(segundos)];
            if (!actual || !objetivo || !litros) {
                document.getElementById("resultado").innerText = "üî¥ Faltan datos o fuera de rango.";
                return;
            }

            const diferencia = Math.abs(actual - objetivo);
            const porcentaje = interpolar(diferencia).toFixed(2);
            const litrosDiesel = (litros * porcentaje / 100).toFixed(2);

            document.getElementById("resultado").innerHTML = `
                ‚úÖ Viscosidad actual: <strong>${actual} CPP</strong><br>
                üîÅ Diferencia: <strong>${diferencia} CPP</strong><br>
                üíß % de di√©sel a agregar: <strong>${porcentaje}%</strong><br>
                üõ¢Ô∏è Litros totales: <strong>${litros}</strong><br>
                ‚ûï Litros de di√©sel a agregar: <strong>${litrosDiesel} L</strong>
            `;
        }
    </script>
</body>
</html>
